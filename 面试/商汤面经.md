# 商汤面经

## 一面

1. 自我介绍
2. 介绍下简历的三个项目
3. 有没有在FPGA上跑过流水线：没有
4. 介绍下多周期CPU流水线：五阶段
5. 介绍下指令冒险：结构冒险、数据冒险、控制冒险
6. 介绍下乱序发射
7. 乱序发射的结构：记分板和保留站
8. 乱序发射怎么解决数据冒险的
9. 寄存器重命名
10. 超标量
11. cache地址映射：讲了页式地址转换
12. 页内偏移是虚拟的还是物理的：物理的，但是面试官说有4种排列组合
13. 循环展开的优点和缺点：优点指令重排和调度，提高ILP，缺点是寄存器数量不够
14. 分支预测：静态动态、两位饱和计数器、TAGE
15. 是否了解Michael Benchmark（搜不到，不知道说的是哪个英文单词）
16. 怎么计算指令的吞吐和延迟：讲了CPI的计算，但是面试官说一个循环体执行1w次，循环体内部做10个add，那么这10个add指令应该怎么组织？不知道qaq，面试官说计算延迟的话应该写同一个寄存器
17. cache的组织结构：没太明白哪些东西属于组织结构
18. cache的映射：直接映射、全相联映射、组相联映射
19. 现代处理器用的是哪种映射方法：组相联映射
20. 知道Intel组相联的参数吗？不知道
21. 多核cache的伪共享：问是不是LLC上的，面试官说不是，最后下来搜才发现我知道这个内容，但不知道学名叫伪共享气死我了
22. 内核态和用户态
23. 内核态怎么执行用户的请求的：答了系统调用，但是面试官说不是这个，
24. 接上一个问题，系统怎么处理malloc请求的：答sbrk()系统调用，面试官说答不到点子上，用户进程和内核进程可能一一对应，也有可能一个内核进程处理所有用户进程的请求
25. x86和RISC-V微结构的区别：答CISC和RISC，但面试官说应该从芯片内部结构、译码器、engine、cache总线、load queue和store queue等硬件结构来回答，那就直接不会了
26. 线程、进程和纤程的区别：纤程不知道
27. 最后15分钟一道算法题：合并两个升序的链表，我说直接比就行，面试官说要是改成合并K个升序的链表呢，我说试一下，用优先队列做出来了
28. 问想做什么方向，系统框架开发/CPU优化/GPU优化：后两者
29. 要不要面一下GPU：可以尝试一下，但了解不多

简历主打突出一个CPU和体系结构，所以问了很多这方面相关的

## 二面

1. 自我介绍
2. 对软件的性能评测和性能改进有什么了解吗？答了实验室的东西，其余的不了解
3. roofline model：不了解，貌似是计算强度相关的
4. 进程的内存布局、大概的相对位置：程序段、数据段、BSS、栈、堆，栈从高地址往低地址增长，所以栈在上面
5. C++智能指针
6. 访存：包括TLB、cache、内存
7. NUMA：多核处理器架构里的非对称访存
8. 算法一：二叉树的中序遍历（用栈写出来了，后面面试官说有没有不用栈的）
9. 算法二：最长公共子数组和（动态规划，有一点点思路，没完全写出来），空间优化答错了，滚动数组可以优化到min(M, N)

全程一个小时，除了最后一道算法题没写出来和前两问题超出认知，其余全答上来了，面试官都是通过一两道题来考察某个领域的基础知识是否扎实，回答上来了就觉得你基础还算扎实的感觉，面试官考察的东西会跟一面错开

业务：大模型推理的全栈性能优化和开源框架，AI训练推理和科学计算的平台，包括代码的编译优化和动态调度