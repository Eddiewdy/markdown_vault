## 作业一

### 一、 结合图形流水线和Nvidia可编程渲染管线图形处理器GeForce 6800/7800架构，阐述图形处理器的图形生成步骤。

#### 图形处理器的流水线主要功能

- 顶点处理（Vertex Operations） 

顶点处理是指在图形渲染流水线中对输入的几何图形的顶点数据进行处理和转换的过程。这些处理和转换可以包括几何变换、纹理坐标变换、光照计算等等。在顶点处理阶段，图形处理器通常会对输入的顶点数据进行多个处理步骤，这些步骤可以包括：

1. 顶点变换：将输入的顶点坐标从局部坐标系变换到世界坐标系或观察坐标系。这些变换通常包括平移、旋转、缩放等。
2. 投影变换：将观察坐标系中的顶点坐标转换为裁剪坐标系中的坐标，这是一个四维坐标系，其中x、y、z坐标用于表示顶点在三维空间中的位置，w坐标用于透视除法。
3. 视口变换：将裁剪坐标系中的坐标变换到屏幕空间中的坐标，这是一个二维坐标系，其中x、y坐标用于表示顶点在屏幕上的位置。
4. 法线变换：对于需要进行光照计算的几何图形，还需要对法线进行变换，以确保正确的光照效果。
5. 纹理坐标变换：对于使用纹理贴图的几何图形，还需要对纹理坐标进行变换，以确保正确的纹理映射。

- 图元整合（Primitive Assembly）

图元整合是指将多个几何图元（如三角形、线段等）合并成一个或多个更大的几何图元的过程，以提高图形渲染的效率和性能。图元整合可以在多个阶段进行，包括CPU端的几何合并和GPU端的图元合并。CPU端的几何合并可以在应用程序中进行，比如通过合并相邻的三角形来减少绘制调用次数。GPU端的图元合并通常在光栅化前完成，可以通过一些技术来实现，如三角形扇、三角形条带、索引缓冲等。

- 光栅化（Rasterization）

将顶点处理阶段输出的几何图形转换为像素的过程。在光栅化阶段，图形处理器将三角形、线段等几何图形转换为屏幕上对应的像素，并对这些像素进行处理和存储，以便后续的片元渲染和像素整合阶段使用，实现的主要功能包括裁剪、三角形扫描转换、三角形插值、深度测试等。

- 片元渲染（Fragment Operations）

片元渲染阶段是图形流水线的第二个阶段，它的主要任务是根据光栅化后生成的图元信息，对每个图元进行着色，并生成每个像素的颜色、深度等信息。在片元渲染阶段，图形处理器通常会对每个像素进行多个计算和操作，包括纹理映射、光照计算、深度测试、模板测试、混合等等。这些计算和操作可以根据应用程序的需求进行配置和调整，以实现不同的渲染效果和图形风格。

- 像素整合（Composition） 

像素混合阶段是图形流水线的最后一个阶段，在像素整合阶段，图形处理器将处理过的像素合并到帧缓冲区中，并对像素进行最终的混合、过滤和调整。这样，最终的图像就被存储在帧缓冲区中，可以被显示器显示或用于后续的图像处理和分析。

#### 图形处理器中的主要功能单元和实现的主要操作

（1）顶点引擎：顶点引擎是图形处理器中的主要功能单元，它用于对顶点进行处理和变换。实现的主要操作包括顶点变换、顶点着色、顶点属性传递等。

（2）像素处理器：像素处理器是图形处理器中的另一个主要功能单元，它用于对像素进行处理和操作。实现的主要操作包括纹理采样、像素着色、深度测试、像素合成等。

（3）图形存储器：图形存储器主要用于存储顶点数据、纹理数据和像素数据等。

### 二、查阅图形处理及图形处理器文献，以NVIDIA GPU为例，归纳整理GPU的发展历程，阐述各发展阶段的结构特点。

| **发展阶段**     | **典型**GPU                      | **发售年份** | **特点**                                                     |
| ---------------- | -------------------------------- | ------------ | ------------------------------------------------------------ |
| 全硬件映射实现   | GeForce 256                      | 1999         | 单芯片3D实时图像处理器 点向量转换模块，光线处理器，和可配置的像素-片元流水线 |
| 部分可编程       | GeForce 3                        | 2001         | GeForce3采用了8个像素流水线和4个顶点流水线，支持硬件T&L、AGP 4x、纹理压缩和多重采样等技术。此外，GeForce3还引入了NVIDIA的Programmable Vertex Shader（PVS）技术，支持自定义的顶点着色器。 |
| 部分可编程       | GeForce FX                       | 2002         | 点计算、像素-片元处理器和顶点处理器都可以编程。 实现非图形计算需要调用图形API |
| 部分可编程       | GeForce 6800                     | 2004         | 首个统一渲染架构，支持CUDA编程语言。点计算、像素-片元处理器和顶点处理器都可以编程。 |
| 统一渲染架构     | GeForce 8800                     | 2006         | 有的流处理器核心都可以执行顶点处理，集合渲染，和像素上色线程有极强的可扩展性，增加了指令集支持更多通用的计算 |
| 流多处理器（SM） | Kepler/Maxwell/Pascal架构系列GPU | 2012         | SMX内核结构，支持虚拟化，动态并行，同时CUDA/OpenCL           |

