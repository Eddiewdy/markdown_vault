## 作业二

### 一、对比分析现代CPU与现代GPU体系结构的特点。

现代CPU和GPU体系结构有许多不同之处。以下是它们的对比分析：

1）主要目标应用范围：

CPU主要面向通用计算，其设计目标是在各种应用场景中提供高效的计算能力。而GPU则主要面向图形处理、科学计算和机器学习等需要大量并行计算的应用。GPU的设计目标是在这些应用场景下提供高效的并行计算能力。

2）硬件资源分布：

CPU的硬件资源包括缓存、ALU、寄存器和流水线等，这些资源通常较为均匀地分布在CPU核心中。GPU的硬件资源包括大量的处理单元和内存，这些资源通常按照流处理器的形式组织起来，以实现高效的并行计算。

3）线水线设计：

CPU的指令流水线通常比较深，以实现更高的吞吐量。GPU的指令流水线通常较浅，以实现更低的延迟和更高的并行度。

4）存储器延时和存储层次结构：

CPU通常采用具有多级缓存的存储层次结构来减少存储器延时。GPU也采用类似的存储层次结构，但由于其面向的应用需要更大的内存带宽和更低的延迟，因此GPU通常采用更多的高速内存和更快的内存控制器。

5）浮点计算性能：

GPU在浮点计算方面具有非常高的性能，因为它通常具有大量的浮点处理单元和高速的浮点运算单元。而CPU的浮点计算性能则取决于具体的处理器型号和核心数量。



### 二、以Nvidia图形处理器序列为例，对比Fermi/Volta/Ampera/Hopper/Ada GPU架构的结构特点。

以下是Nvidia图形处理器序列Fermi/Volta/Ampera/Hopper/Ada的主要结构特点对比：

| 架构   | 代表型号         | 晶体管数量 | 计算核心数量 | FP32/FP64峰值性能                         | 最高工作频率 | TDP功耗 | GFLOPS/W |
| ------ | ---------------- | ---------- | ------------ | ----------------------------------------- | ------------ | ------- | -------- |
| Fermi  | GeForce GTX 580  | 3.0B       | 512          | 1.5 TFLOPS / 0.15 TFLOPS                  | 772 MHz      | 244 W   | 300      |
| Volta  | Titan V          | 21.1B      | 5120         | 15.0 TFLOPS / 7.5 TFLOPS                  | 1455 MHz     | 250 W   | 720      |
| Ampere | GeForce RTX 3090 | 28.3B      | 10496        | 35.6 TFLOPS / 11.2 TFLOPS                 | 1695 MHz     | 350 W   | 780      |
| Hopper | H100(SXM card)   | ？         | 16896        | 64 TFLOPS/32 TFLOPS/16 TFLOPS             | 1980 MHz     | 700W    | 2500     |
| Ada    | GeForce RTX 4090 | 76.3B      | 16384        | Non tensor:82.6 TFLOPSTensor:165.2 TFLOPS | 2520 MHz     | 450W    | 3500     |

注：以上数据来自Nvidia官网和第三方媒体报道，实际性能可能会有差异。

从表格中可以看出，Nvidia GPU架构在晶体管数量、计算核心数量、浮点性能、最高工作频率、TDP功耗、单位功耗的浮点性能等方面都在不断提高。此外，随着架构的升级，GPU的存储层次结构也发生了一些变化：

- Fermi架构中的GPU采用了多级缓存和片上共享存储器，其中包括L1和L2缓存以及16KB的共享存储器。
- Volta架构中，GPU采用了更大的片上高速缓存，包括L1和L2缓存以及6MB的共享L3缓存。
- Ampere架构中，GPU采用了更大的L1缓存，以及更大、更高速的L2和L3缓存，L2缓存的大小增加了5倍以上，L3缓存的大小增加了近3倍，同时还增加了L4缓存。
- Hopper架构中，GPU采用了256KB L1/shared, 50MB L2缓存，Hopper支持PCIE 5.0 or 第三代NVLink系统，NVLink以2:1的锥形胖树拓扑结构进行连接，这些连接的节点能够提供57.6TB/秒的全对全带宽。
- Ada的第三代RT核具有两倍的ray-triangle吞吐量，不支持Nvlink，提供128KB L1 and 72 MB L2缓存。
